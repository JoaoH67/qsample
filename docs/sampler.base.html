<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Super class for all sampler objects">

<title>qsample - Sampler base class</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="qsample - Sampler base class">
<meta property="og:description" content="Super class for all sampler objects">
<meta property="og:site-name" content="qsample">
<meta name="twitter:title" content="qsample - Sampler base class">
<meta name="twitter:description" content="Super class for all sampler objects">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">qsample</span>
    </a>
  </div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Sampler base class</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">qsample</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./math.html" class="sidebar-item-text sidebar-link">Math</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./circuit.html" class="sidebar-item-text sidebar-link">Circuit</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./protocol.html" class="sidebar-item-text sidebar-link">Protocol</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sim.mixin.html" class="sidebar-item-text sidebar-link">Simulator Mixin</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sim.stabilizer.html" class="sidebar-item-text sidebar-link">CHP Simulator</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sim.statevector.html" class="sidebar-item-text sidebar-link">Statevector Simulator</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./callbacks.html" class="sidebar-item-text sidebar-link">Sampler Callbacks</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sampler.tree.html" class="sidebar-item-text sidebar-link">Count Tree</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sampler.base.html" class="sidebar-item-text sidebar-link active">Sampler base class</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sampler.direct.html" class="sidebar-item-text sidebar-link">Direct Monte Carlo sampler</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sampler.subset.html" class="sidebar-item-text sidebar-link">Subset Monte Carlo sampler</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./noise.html" class="sidebar-item-text sidebar-link">Noise / Error models</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./examples.html" class="sidebar-item-text sidebar-link">Examples</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#protocol_subset_occurence" id="toc-protocol_subset_occurence" class="nav-link active" data-scroll-target="#protocol_subset_occurence">protocol_subset_occurence</a></li>
  <li><a href="#protocol_all_subsets" id="toc-protocol_all_subsets" class="nav-link" data-scroll-target="#protocol_all_subsets">protocol_all_subsets</a></li>
  <li><a href="#all_subsets" id="toc-all_subsets" class="nav-link" data-scroll-target="#all_subsets">all_subsets</a></li>
  <li><a href="#subset_occurence" id="toc-subset_occurence" class="nav-link" data-scroll-target="#subset_occurence">subset_occurence</a></li>
  <li><a href="#sort_by_list" id="toc-sort_by_list" class="nav-link" data-scroll-target="#sort_by_list">sort_by_list</a></li>
  <li><a href="#err_probs_tomatrix" id="toc-err_probs_tomatrix" class="nav-link" data-scroll-target="#err_probs_tomatrix">err_probs_tomatrix</a></li>
  <li><a href="#tomatrix" id="toc-tomatrix" class="nav-link" data-scroll-target="#tomatrix">tomatrix</a></li>
  <li><a href="#sampler" id="toc-sampler" class="nav-link" data-scroll-target="#sampler">Sampler</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/dpwinter/qsample/tree/master/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Sampler base class</h1>
</div>

<div>
  <div class="description">
    Super class for all sampler objects
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>Definitions: * A <em>circuit location</em> (<code>cloc</code>) is a tuple (tick_index,qubit(s)) which specifies a location in a circuit. In the simplest case this tuple can be understood as a Euclidean coordinate in tick-qubit-space, for example (1,2) for a circuit element at tick 1 on qubit 2, for example a single-qubit gate. However, the second entry in the tuple can also be a tuple of qubits, i.e.&nbsp;(tick_index, (qubitA, qubitB)), for example (1,(2,3)) for a 2-qubit gate in tick 1 from qubit 2 (control) to qubit 3 (target). It is important that (1,(2,3)) <span class="math inline">\(\neq\)</span> (1,(3,2)) <span class="math inline">\(\neq\)</span> (1,2)+(1,3). * Common circuit locations can be grouped into a <em>location group</em> (<code>locgrp</code>), for example the set of all 1-qubit gate locations or the set of all idle qubits or all neighboring qubits of 1-qubit gates. A location group is defined by the error model, which sweeps through a circuit and extracts all elements belonging to a certain group. Note that circuit locations can appear in more than one location group and the union of all location groups must not necessarily give all possible circuit locations. This is for example the case for error models which only define errors on gates but not on idle qubits. * By <em>location group weight</em> (<code>locgrp_wgt</code>) we refer to an integer number specifying the amount of location group elements on which to place faults. Note that the weight only specifies the amount, neither the specific element on which the fault is placed (this will be choosen uniformly random) nor the specific error which will be placed (this will be drawn uniformly random from a set of group errors (<code>locgrp_errsets</code>) defined by the error model). * By <em>location group probability</em> (<code>locgrp_prob</code>) on the other hand, we refer to the probability of placing faults on <strong>each</strong> element of a group. Thus, during circuit execution it will be decided for each element of a location group if an error is placed based on the group probability. * Both the above can be written as vectors over all location groups an error model specifies. The vector of location group weights (<code>locgrp_wgts</code>) thereby characterizes a so-called fault-weight <code>subset</code>, i.e.&nbsp;a particular amount of faults on each location group defined in an error model. These subsets form the sampling space on which we apply importance sampling during subset sampling. * For subset sampling we analytically calculate the <em>subset occurence probability</em> (<code>Aws</code>) as a function of location group probabilities <code>locgrp_probs</code>for each location group. As a subset occurence probability results from a binomial distribution <em>binom(locgrp_wts, locgrp_lens, locgrp_probs)</em> we also refer to it as <em>binomial weight</em> of a subset, or simply <span class="math inline">\(A_w\)</span>, as this is the symbol used in the paper. * If one of the above quantities is preceeded by a <code>protocol_</code> we have a dictionary with <em>circuit ids</em> (<code>cids</code>) as keys and the given quantity for a circuit as value. Note that <code>locgrp_probs</code> are defined equally for each circuit in the protocol as those represent physical error rates of a (faulty) device which also won’t be different for different circuits in reality. To sample from more than physical error rate a range <code>locgrp_probs_range</code> can be specified which contains a range of error rates for each location group. * <code>locgrp_wgts_combis</code> are all possible <code>locgrp_wgts</code> vectors up to the total number of elements (<code>locgrp_len</code>) in each location group.</p>
<hr>
<p><a href="https://github.com/dpwinter/qsample/tree/master/blob/master/qsample/sampler/base.py#L47" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="protocol_subset_occurence" class="level3">
<h3 class="anchored" data-anchor-id="protocol_subset_occurence">protocol_subset_occurence</h3>
<blockquote class="blockquote">
<pre><code> protocol_subset_occurence (protocol_groups, protocol_subsets,
                            group_probs)</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/dpwinter/qsample/tree/master/blob/master/qsample/sampler/base.py#L44" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="protocol_all_subsets" class="level3">
<h3 class="anchored" data-anchor-id="protocol_all_subsets">protocol_all_subsets</h3>
<blockquote class="blockquote">
<pre><code> protocol_all_subsets (protocol_groups)</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/dpwinter/qsample/tree/master/blob/master/qsample/sampler/base.py#L41" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="all_subsets" class="level3">
<h3 class="anchored" data-anchor-id="all_subsets">all_subsets</h3>
<blockquote class="blockquote">
<pre><code> all_subsets (groups)</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/dpwinter/qsample/tree/master/blob/master/qsample/sampler/base.py#L37" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="subset_occurence" class="level3">
<h3 class="anchored" data-anchor-id="subset_occurence">subset_occurence</h3>
<blockquote class="blockquote">
<pre><code> subset_occurence (groups, subsets, group_prob_range)</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/dpwinter/qsample/tree/master/blob/master/qsample/sampler/base.py#L34" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="sort_by_list" class="level3">
<h3 class="anchored" data-anchor-id="sort_by_list">sort_by_list</h3>
<blockquote class="blockquote">
<pre><code> sort_by_list (d:dict, l:list)</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/dpwinter/qsample/tree/master/blob/master/qsample/sampler/base.py#L30" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="err_probs_tomatrix" class="level3">
<h3 class="anchored" data-anchor-id="err_probs_tomatrix">err_probs_tomatrix</h3>
<blockquote class="blockquote">
<pre><code> err_probs_tomatrix (err_probs:dict, groups:list)</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/dpwinter/qsample/tree/master/blob/master/qsample/sampler/base.py#L26" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="tomatrix" class="level3">
<h3 class="anchored" data-anchor-id="tomatrix">tomatrix</h3>
<blockquote class="blockquote">
<pre><code> tomatrix (mixed_list)</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/dpwinter/qsample/tree/master/blob/master/qsample/sampler/base.py#L52" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="sampler" class="level3">
<h3 class="anchored" data-anchor-id="sampler">Sampler</h3>
<blockquote class="blockquote">
<pre><code> Sampler (protocol, simulator, err_probs={'0': {}}, err_model=None)</code></pre>
</blockquote>
<p>Initialize self. See help(type(self)) for accurate signature.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>