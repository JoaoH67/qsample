---

title: Samplers Common


keywords: fastai
sidebar: home_sidebar

summary: "Collection of helper functions and constants common to both Circuit and Protocol samplers"
description: "Collection of helper functions and constants common to both Circuit and Protocol samplers"
nb_path: "05c_samplers.common.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 05c_samplers.common.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Constants">Constants<a class="anchor-link" href="#Constants"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Data-structures">Data structures<a class="anchor-link" href="#Data-structures"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="CountNode" class="doc_header"><code>class</code> <code>CountNode</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L32" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>CountNode</code>(<strong><code>name</code></strong>, <strong><code>parent</code></strong>=<em><code>None</code></em>, <strong><code>children</code></strong>=<em><code>None</code></em>, <strong><code>counts</code></strong>=<em><code>0</code></em>, <strong><code>ckey</code></strong>=<em><code>None</code></em>, <strong><code>is_deterministic</code></strong>=<em><code>False</code></em>, <strong><code>is_fail</code></strong>=<em><code>False</code></em>) :: <code>NodeMixin</code></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="SampleTree" class="doc_header"><code>class</code> <code>SampleTree</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L66" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>SampleTree</code>(<strong><code>root</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<h1 id="Callback-functions">Callback functions<a class="anchor-link" href="#Callback-functions"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="curried" class="doc_header"><code>curried</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L148" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>curried</code>(<strong><code>func</code></strong>)</p>
</blockquote>
<p>A decorator that curries the given function.</p>
<p>@curried
def a(b, c):
    return (b, c)</p>
<p>a(c=1)(2)  # returns (2, 1)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="stats" class="doc_header"><code>stats</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L166" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>stats</code>(<strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="store" class="doc_header"><code>store</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L171" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>store</code>(<strong><code>fn_names</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="rel_std_target" class="doc_header"><code>rel_std_target</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L182" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>rel_std_target</code>(<strong><code>target</code></strong>=<em><code>0.1</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot_stats" class="doc_header"><code>plot_stats</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L191" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot_stats</code>(<strong><code>sample_range</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Callbacks-for-Protocol-sampler-only:">Callbacks for Protocol sampler only:<a class="anchor-link" href="#Callbacks-for-Protocol-sampler-only:"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="verbose" class="doc_header"><code>verbose</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L216" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>verbose</code>(<strong><code>msmt</code></strong>, <strong><code>_node</code></strong>, <strong><code>node</code></strong>, <strong><code>circuit</code></strong>, <strong><code>faults</code></strong>=<em><code>None</code></em>, <strong><code>fault_circuit</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot_stored_stats" class="doc_header"><code>plot_stored_stats</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L222" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot_stored_stats</code>(<strong><code>plot_delta</code></strong>=<em><code>False</code></em>, <strong><code>labels</code></strong>=<em><code>['$p_L\\pm std$', 'std', '$\\delta$']</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Callbacks-for-Subset-Protocol-sampler-only:">Callbacks for Subset Protocol sampler only:<a class="anchor-link" href="#Callbacks-for-Subset-Protocol-sampler-only:"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="subset_rates" class="doc_header"><code>subset_rates</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L252" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>subset_rates</code>(<strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot_subset_rates" class="doc_header"><code>plot_subset_rates</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L270" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot_subset_rates</code>(<strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="path_prods" class="doc_header"><code>path_prods</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L296" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>path_prods</code>(<strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot_paths" class="doc_header"><code>plot_paths</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L320" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot_paths</code>(<strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot_path_hist" class="doc_header"><code>plot_path_hist</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L349" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot_path_hist</code>(<strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot_save_tree" class="doc_header"><code>plot_save_tree</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L379" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot_save_tree</code>(<strong><code>fname</code></strong>=<em><code>'temp.png'</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<h1 id="Other-functions">Other functions<a class="anchor-link" href="#Other-functions"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Subset-analytics">Subset analytics<a class="anchor-link" href="#Subset-analytics"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="circuit_partitions" class="doc_header"><code>circuit_partitions</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L405" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>circuit_partitions</code>(<strong><code>circ</code></strong>, <strong><code>partition_names</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="circuit_weight_vectors" class="doc_header"><code>circuit_weight_vectors</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L409" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>circuit_weight_vectors</code>(<strong><code>w_max</code></strong>, <strong><code>w_exclude</code></strong>=<em><code>{}</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="circuit_subset_occurence" class="doc_header"><code>circuit_subset_occurence</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L419" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>circuit_subset_occurence</code>(<strong><code>partitions</code></strong>, <strong><code>partition_w_vecs</code></strong>, <strong><code>p_phy_per_partition</code></strong>)</p>
</blockquote>
<p>Return (weight)x(p_phys) (parition) subset occurance matrix transforming p_SS vector to p_L vector</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="protocol_partitions" class="doc_header"><code>protocol_partitions</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L427" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>protocol_partitions</code>(<strong><code>circuits_dict</code></strong>, <strong><code>partition_names</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="protocol_weight_vectors" class="doc_header"><code>protocol_weight_vectors</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L432" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>protocol_weight_vectors</code>(<strong><code>partition_dict</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="protocol_subset_occurence" class="doc_header"><code>protocol_subset_occurence</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L437" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>protocol_subset_occurence</code>(<strong><code>partition_dict</code></strong>, <strong><code>w_vecs_dict</code></strong>, <strong><code>p_phys</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Subset-filtering-and-selection">Subset filtering and selection<a class="anchor-link" href="#Subset-filtering-and-selection"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="w_plus1_filter" class="doc_header"><code>w_plus1_filter</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L442" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>w_plus1_filter</code>(<strong><code>sampler</code></strong>, <strong><code>w_ids</code></strong>, <strong><code>circuit_hash</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="random_sel" class="doc_header"><code>random_sel</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L449" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>random_sel</code>(<strong><code>w_ids</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ERV_sel" class="doc_header"><code>ERV_sel</code><a href="https://github.com/dpwinter/qsam/tree/master/qsam/samplers/common.py#L453" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ERV_sel</code>(<strong><code>sampler</code></strong>, <strong><code>w_ids</code></strong>, <strong><code>circuit_hash</code></strong>, <strong><code>tree_node</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>


